# AI Prompt: Build the vTasks Application

## 1. Project Objective
Recreate the "vTasks" web application, a lightweight, browser-based tool for task and note management. The application must adhere strictly to the specifications below.

## 2. Core Technologies & Setup
- **Language/Framework:** React 19 with TypeScript, Vite as the build tool.
- **Styling:** Tailwind CSS (v3 via CDN) and custom CSS for theming.
- **Data Storage:** Browser `localStorage` exclusively. No backend.
- **Deployment Target:** Static site (GitHub Pages).
- **Theme:** A single, **exclusive dark theme** (Dark Purple/Magenta inspired). No light mode or theme toggle.

## 3. File Structure
Create the following file structure:
- `index.html` (Content provided in Section 5)
- `vite.config.ts` (Details in Section 9)
- `package.json` (Details in Section 10)
- `metadata.json` (Content provided in Section 6)
- `README.md` (Generate based on features described herein)
- `requirements.md` (This prompt effectively serves as the source for this; the AI can generate a summary if needed or this document can be considered its replacement)
- `build.md` (Generate a summary of build instructions based on features described herein)
- `src/`
    - `main.tsx` (React app entry point)
    - `App.tsx` (Main application component managing state and views)
    - `types.ts` (All TypeScript types and enums)
    - `hooks/`
        - `useLocalStorage.ts`
    - `utils/`
        - `dateUtils.ts`
    - `components/`
        - `AppBar.tsx`
        - `InputForm.tsx`
        - `Tabs.tsx`
        - `FilterControls.tsx`
        - `EntryItem.tsx`
        - `ActiveTaskList.tsx`
        - `NoteList.tsx`
        - `CompletedTaskList.tsx`
        - `ArchivedNoteList.tsx`
        - `SnoozedList.tsx`
        - `DetailModal.tsx`
        - `ConfirmDeleteModal.tsx`
        - `CompletionNotesModal.tsx`
        - `ConfirmArchiveModal.tsx`
        - `ExportOptionsModal.tsx`
        - `ImportDataModal.tsx`
        - `SnoozeModal.tsx`

## 4. Key Data Structures (`src/types.ts`)
Implement the following:
- **`EntryType` enum:** `'TASK'`, `'NOTE'`.
- **`PriorityLevel` enum:** `'CRITICAL'`, `'HIGH'`, `'NORMAL'`, `'LOW'`.
- **`Entry` interface:**
    - `id: string` (Unique identifier, generated by `crypto.randomUUID()`)
    - `title: string` (Required)
    - `details?: string` (Optional)
    - `type: EntryType`
    - `createdAt: string` (ISO Date string, timestamp of creation)
    - `isCompleted: boolean` (For tasks. Default: `false`)
    - `completedAt?: string` (ISO Date string, timestamp of completion)
    - `completionNotes?: string` (Optional notes for task completion)
    - `dueDate?: string` (Optional ISO Date string: YYYY-MM-DD)
    - `contact?: string` (Optional)
    - `url?: string` (Optional)
    - `isArchived?: boolean` (For notes. Default: `false`)
    - `archivedAt?: string` (ISO Date string, timestamp of archiving)
    - `project?: string` (Optional)
    - `priority?: PriorityLevel` (Optional. Default: `PriorityLevel.Normal`)
    - `snoozedUntil?: string` (Optional ISO Date string: full date-time)
- **`TabView` enum:** `'ACTIVE_TASKS'`, `'NOTES'`. (Other views like completed, archived, snoozed are managed by `viewMode` in `App.tsx`).
- **`ActiveFilters` interface:**
    - `project?: string`
    - `priority?: PriorityLevel`

## 5. Core `index.html` Content
Use the following content for `index.html`. This file defines the crucial CSS custom properties for the dark theme and basic HTML structure.
```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/svg+xml" href="/vite.svg" /> 
  <title>vTasks</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root {
      /* Exclusive Dark Theme (Dark Purple/Magenta - Overhauled) */
      --bg-color: 26 23 40; /* Very, very dark desaturated purple */
      --app-bar-bg-color: 49 46 69; /* Dark, slightly desaturated purple */
      --app-bar-text-color: 229 226 237;
      --card-bg-color: 36 32 55; /* Dark purple, distinct from bg */
      --text-primary: 235 232 245; /* Light lavender */
      --text-secondary: 188 182 213; /* Medium lavender */
      --text-placeholder: 138 132 163;
      --border-color: 59 55 80; /* Darker border */
      --divider-color: 59 55 80;
      --accent-color: 167 139 250; /* Brighter Violet */
      --accent-color-hover: 139 92 246; /* Original Violet */
      --accent-text-color: 255 255 255;
      --highlight-color: 236 72 153; /* Brighter Magenta */
      --highlight-color-hover: 219 39 119;
      --completed-accent-color: 52 211 153;
      --completed-text-color: 156 163 175;
      --input-bg-color: 31 27 48; /* Darker input background */
      --input-border-color: 79 70 115; /* Visible but not too bright border */
      --button-secondary-bg-color: 69 63 96; /* Darker secondary button bg */
      --button-secondary-text-color: 209 205 222;
      --destructive-color: 239 68 68; /* Red-500 */
      --destructive-color-hover: 220 38 38; /* Red-600 */
    }

    body {
      font-family: 'Inter', sans-serif;
      background-color: rgb(var(--bg-color));
      color: rgb(var(--text-primary));
      padding-top: 4rem; /* Space for fixed AppBar */
    }

    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    ::-webkit-scrollbar-thumb {
      background-color: rgba(var(--text-secondary), 0.4);
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover {
      background-color: rgba(var(--text-secondary), 0.6);
    }
    ::-webkit-scrollbar-track {
      background-color: transparent;
    }
    
    .drag-handle {
      cursor: grab;
    }
    body.is-grabbing, body.is-grabbing * {
      cursor: grabbing !important;
    }
    .dragging-item {
      opacity: 0.6;
      box-shadow: 0 10px 20px rgba(0,0,0,0.2) !important;
      transform: scale(1.02);
    }
    .drag-over-target-indicator {
      border-top: 3px solid rgb(var(--accent-color)) !important; 
    }

    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: rgba(var(--bg-color), 0.7); 
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
      -webkit-backdrop-filter: blur(5px);
      backdrop-filter: blur(5px);
    }
    .modal-content {
      background-color: rgb(var(--card-bg-color));
      padding: 20px; 
      border-radius: 8px; 
      box-shadow: 0 10px 25px rgba(0,0,0,0.3), 0 5px 10px rgba(0,0,0,0.2);
      width: 90%;
      max-width: 500px;
      max-height: 90vh;
      display: flex; 
      flex-direction: column;
    }

    /* Class to hint browser for dark mode styling of native input controls like date/time pickers */
    .dark-input-icons {
      color-scheme: dark;
    }
  </style>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
 
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.1.0",
    "react-dom/": "https://esm.sh/react-dom@^19.1.0/",
    "react/": "https://esm.sh/react@^19.1.0/",
    "@vitejs/plugin-react": "https://esm.sh/@vitejs/plugin-react@^4.5.0",
    "vite": "https://esm.sh/vite@^6.3.5"
  }
}
</script>
</head>
<body class="antialiased text-base">
  <div id="root"></div>
  <script type="module" src="/src/main.tsx"></script>
</body>
</html>
```

## 6. Core `metadata.json` Content
Create `metadata.json` with the following content:
```json
{
  "name": "vTasks",
  "description": "A web application for lightweight task management and note-taking, named vTasks. Data is stored locally in your browser. Full Google Account and Drive integration is a conceptual feature not implemented in this version.",
  "requestFramePermissions": [],
  "prompt": ""
}
```

## 7. Detailed Application Requirements

The main application logic resides in `src/App.tsx`, which manages state and orchestrates child components. Implement all features as described in `requirements.md` sections (or their equivalents within this prompt if `requirements.md` is not directly provided to the AI).

### 7.1. Layout & Views (`App.tsx`):
- **AppBar (`AppBar.tsx`):** Fixed position at the top, height `4rem`. Displays application title: "vTasks". No theme toggle.
- **Input Form (`InputForm.tsx`):** Persistently displayed below AppBar.
    - **Type Selection:** Segmented control ("Task", "Note").
    - **Title Input & Integrated "Add Details" Icon Button:** Primary text input for `Entry.title` (required). Icon button (plus/minus style) on the right toggles the "Options Panel".
    - **Options Panel (Toggled, initially hidden):** Contains inputs for `Details` (textarea), `Project` (text input with autocomplete from existing active/snoozed projects), `Due Date` (`<input type="date">`), `Priority` (dropdown select: Critical, High, Normal, Low), `Contact` (text input), `URL` (`<input type="url">`, with auto-HTTPS prefixing).
    - **Submission:** Full-width "Add Task"/"Add Note" button. Clears form, hides Options Panel, focuses relevant tab on submit.
- **Main Content Area (`viewMode` state in `App.tsx`):**
    - **Main View (`viewMode === 'main'`):**
        - **Tabs & Filters (`Tabs.tsx`, `FilterControls.tsx`):** Tabs for "Active Tasks" and "Notes", showing filtered item counts. Active tab visually distinct. A "Filter" button to the right of tabs opens a dropdown.
            - **Filter Dropdown:** Allows filtering by "Project" and "Priority". Options are dynamically populated. "Clear All Filters" button. Dropdown closes on outside click.
        - **Tab Content:** Displays `ActiveTaskList.tsx` or `NoteList.tsx` (showing filtered, draggable items).
        - **Navigation Buttons:** "View Snoozed Items", "View Completed Tasks", "View Archived Notes". Conditionally displayed with item counts and specific corner rounding based on visibility.
    - **Snoozed Items View (`viewMode === 'snoozed'`, rendered by `SnoozedList.tsx`):** Heading "Snoozed Items", "← Back" button. Lists items whose `snoozedUntil` is in the future, sorted by `snoozedUntil` (soonest first). Items are editable.
    - **Completed Tasks View (`viewMode === 'completed'`, rendered by `CompletedTaskList.tsx`):** Heading "Completed Tasks", "← Back" button. Grouped by completion week (most recent first). Tasks within groups sorted by `completedAt`. "Copy Titles" button per week group.
    - **Archived Notes View (`viewMode === 'archived'`, rendered by `ArchivedNoteList.tsx`):** Heading "Archived Notes", "← Back" button. Sorted by `archivedAt` (most recent first).
- **Footer:** Non-sticky. "Import Data" button (opens `ImportDataModal`), "Export All Data" button (opens `ExportOptionsModal`). Copyright notice.

### 7.2. Entry Item (`EntryItem.tsx`):
- **General Display:** Rounded card, shadow. Priority indicated by a colored left border (Critical: Red, High: Yellow, Low: Sky Blue; Normal: default).
- **Interaction:** Clicking card (not actions/inputs) opens `DetailModal`. Entire card draggable in active lists.
- **Content (Non-Editing State):** Title. Task Checkbox (if task, opens `CompletionNotesModal`). Project & Contact info. Due Date, Snoozed Date (formatted with time), Completed At Date, Archived At Date. Specific layout for these dates.
- **Action Icons (Top-Right, conditional, 10% opacity, 100% on hover):**
    - URL Icon (Globe): If `entry.url` exists. Opens URL.
    - Edit Icon (Pencil): For active/snoozed items. Toggles inline editing.
    - Unsnooze Icon (Bell Slash): For snoozed items. Unsnoozes.
    - Snooze Icon (Clock): For active items. Opens `SnoozeModal`.
    - Archive Icon (Archive Box): For active notes. Opens `ConfirmArchiveModal`.
    - Delete Icon (Trash Can): Opens `ConfirmDeleteModal`.
- **Inline Editing Mode:** Inputs for Title, Details (textarea scrolls to bottom on focus), Project (autocomplete), Due Date (with "Clear" button), Priority (select), Contact, URL. Snooze Date & Time inputs (with "Clear" button for date). "Save" and "Cancel" buttons.

### 7.3. Modals:
- **`DetailModal.tsx`:** Header: Title. Action Icons (Edit, Snooze/Unsnooze, Archive/Unarchive, Delete, Close). Scrollable body with all entry fields. Footer (for tasks): "Mark as Complete"/"Mark as Incomplete" button.
- **`ConfirmDeleteModal.tsx`:** Standard confirmation message including item title.
- **`CompletionNotesModal.tsx`:** Triggered on task completion. Title includes task title. Textarea for notes. "Skip & Complete", "Save Notes & Complete Task" buttons.
- **`ConfirmArchiveModal.tsx`:** Standard confirmation, dynamic messages for archive/unarchive.
- **`ExportOptionsModal.tsx`:** Title "Export Data". Buttons: "Export as JSON", "Export as CSV", "Cancel".
- **`ImportDataModal.tsx`:** Title "Import Data". File input for JSON/CSV. Radio buttons for "Overwrite existing data" / "Merge with existing data". Warning messages. "Import File", "Cancel" buttons.
- **`SnoozeModal.tsx`:** Title "Snooze Item", includes item title. Inputs for Snooze Date and Time. Defaults time to 12 AM if only date. Validates future time. "Snooze", "Cancel" buttons.

### 7.4. State Management (`App.tsx` & `src/hooks/useLocalStorage.ts`):
- Main data array `entries: Entry[]` persisted to `localStorage` (key: `'task-notes-entries-v3'`).
- Other states: `activeTab`, `editingNoteId`, `editingTaskId`, `draggedItemId`, `viewMode`, `activeFilters`, modal visibility flags.
- **Periodic Unsnooze Check:** `useEffect` in `App.tsx` checks snoozed items every minute and unsnoozes if `snoozedUntil` has passed.
- Use `useMemo` for derived lists (active, completed, archived, snoozed, projects for autocomplete, filter options).
- Use `useCallback` for event handlers.

### 7.5. Utility Functions (`src/utils/dateUtils.ts`):
- Implement date formatting and calculation utilities: `getWeekOfYear`, `getWeekDates`, `formatWeekDateRange`, `formatDate` (full with time), `formatDueDate`, `formatDateShort`, `formatArchivedAtDate`.

### 7.6. Data Import/Export (`App.tsx`):
- **Export:** JSON and CSV formats. Include all `Entry` fields. Filename: `vtasks-export-YYYYMMDD_HHMMSS.[json|csv]`.
- **Import:** Parse JSON and CSV. Handle new fields. Robust CSV parsing. Validate imported data. Handle `overwrite` and `merge` modes (merge assigns new UUIDs).

## 8. Styling & Theme
- Adhere strictly to the CSS custom properties provided in `index.html` (Section 5).
- Utilize Tailwind CSS for layout and component styling.
- Implement custom CSS for styled scrollbars, drag-and-drop visual cues, modal overlay with backdrop blur, and dark mode for native date/time picker icons (`color-scheme: dark`).
- Primary font: 'Inter'.

## 9. `vite.config.ts`
Create `vite.config.ts` with the following content:
```typescript
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'

export default defineConfig(({ command }) => {
  const base = command === 'build' ? '/vtasks/' : '/'; 

  return {
    plugins: [react()],
    base: base,
    build: {
      outDir: 'dist'
    }
  }
})
```

## 10. `package.json`
Create `package.json` with appropriate name, type, scripts, and dependencies:
```json
{
  "name": "vtasks-app",
  "private": true,
  "version": "1.0.0",
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "vite build",
    "lint": "tsc",
    "preview": "vite preview"
  },
  "dependencies": {
    "react": "^19.1.0",
    "react-dom": "^19.1.0"
  },
  "devDependencies": {
    "@types/react": "^18.3.3",
    "@types/react-dom": "^18.3.0",
    "@vitejs/plugin-react": "^4.3.1",
    "typescript": "^5.5.4",
    "vite": "^5.3.5"
  }
}
```
(Ensure version numbers are current or appropriate)

## 11. Accessibility (A11Y)
Implement using semantic HTML, ARIA attributes where necessary (e.g., `aria-label`, `aria-selected`, `role`), ensure keyboard navigability, visible focus indicators, and maintain good color contrast as defined by the theme.

## 12. Final Instructions
- Generate all specified files and their complete content based on this prompt.
- The application should be fully functional, matching all described features, UI, and behaviors.
- Code must be clean, well-organized, readable, and performant.
- Ensure all UI elements, interactions, and data handling (including local storage, import/export, snoozing, filtering) work as specified.
- The application should be a single-page application (SPA).
- No external libraries beyond React, ReactDOM, and what's pulled by Vite/Tailwind CDN.
- Error handling for common scenarios (e.g., form validation, import errors) should be implemented with user-friendly alerts or messages.
```